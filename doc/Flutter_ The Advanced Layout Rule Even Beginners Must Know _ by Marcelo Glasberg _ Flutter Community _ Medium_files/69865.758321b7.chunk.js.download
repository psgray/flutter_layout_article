(self.webpackChunklite=self.webpackChunklite||[]).push([[69865],{353:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var a=t(67294);function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var o=a.createElement("path",{d:"M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z",fill:"#292929"});const i=function(e){return a.createElement("svg",r({width:25,height:25,viewBox:"0 0 25 25",fill:"none"},e),o)}},27497:(e,n,t)=>{"use strict";t.d(n,{aR:()=>ne,Gm:()=>te,_C:()=>ae});var a=t(28655),r=t.n(a),o=t(67154),i=t.n(o),l=t(6479),d=t.n(l),c=t(63038),s=t.n(c),g=t(71439),u=t(67294),f=t(59713),p=t.n(f),v=t(319),m=t.n(v),h=t(46829),I=t(43150),C=t(77355),b=t(93310),E=t(87691),P=t(14646),y=t(78285),O=t(67393);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k={maxHeight:"240px",overflowY:"auto",padding:"24px 20px 16px 24px"};function j(e){var n,t,a,r=e.target,o=e.kind,i=e.showCreateModal,l=e.hidePanel,d=e.viewer,c=u.useRef(null),s=(0,P.I)(),g=(0,I.Ln)({limit:I.W,userId:d.id}),f=(0,y.w)(),p=(0,h.useQuery)(I.Dk,{variables:g}),v=p.data,w=p.error,j=p.loading,_=p.fetchMore;u.useEffect((function(){w&&f({toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[w]);var A,V=u.useCallback((function(){i(),l()}),[i,l]),x=null==v?void 0:v.catalogsByUser.catalogs;return x&&"Catalog"===(null==v||null===(n=v.readingList)||void 0===n?void 0:n.__typename)&&(x=[v.readingList].concat(m()(x))),null!=v&&null!==(t=v.catalogsByUser)&&void 0!==t&&null!==(a=t.paging)&&void 0!==a&&a.nextPageCursor&&(A=function(){return _({variables:T(T({},g),{},{pagingOptions:T(T({},g.pagingOptions),{},{cursor:{id:v.catalogsByUser.paging.nextPageCursor.id}})})})}),u.createElement(C.x,{width:"300px"},u.createElement("div",{className:s(k),ref:c},u.createElement(O.n,{target:r,kind:o,viewer:d,catalogs:x,isLoading:j,fetchMore:A,scrollableEl:c.current})),!j&&u.createElement(C.x,{borderTop:"BASE_LIGHTER",padding:"20px 24px 24px"},u.createElement(E.F,{color:"ACCENT",scale:"L"},u.createElement(b.r,{onClick:V},"Create new list"))))}var _=t(45373),A=t(63508),V=t(50361),x=t.n(V),S=t(85015),B=t(54758),D=t(18627),L=t(97217),R=t(91299),M=t(11462);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function z(){var e=r()(["\n  fragment useAddItemToPredefinedCatalog_postViewerEdge on PostViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return z=function(){return e},e}function F(){var e=r()(["\n  fragment useAddItemToPredefinedCatalog_bookEditionViewerEdge on BookEditionViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return F=function(){return e},e}function G(){var e=r()(["\n  mutation AddToPredefinedCatalog(\n    $type: PredefinedCatalogType!\n    $operation: PredefinedCatalogAddOperationInput!\n  ) {\n    addToPredefinedCatalog(type: $type, operation: $operation) {\n      __typename\n      ... on AddToPredefinedCatalogSucces {\n        version\n        insertedItem {\n          __typename\n          catalogItemId\n          catalogId\n        }\n      }\n    }\n  }\n"]);return G=function(){return e},e}var U="temp-catalog-id",W=(0,g.Ps)(G()),$=(0,g.Ps)(F()),K=(0,g.Ps)(z()),Q=t(73917),Y=t(66227),J=t(68894),Z=t(62212);function q(){var e=r()(["\n  fragment AddToCatalogBase_post on Post {\n    id\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n          catalogItemIds\n        }\n        predefinedContainingThis {\n          catalogId\n          predefined\n          catalogItemIds\n        }\n      }\n      ...editCatalogItemsMutation_postViewerEdge\n      ...useAddItemToPredefinedCatalog_postViewerEdge\n    }\n    ...WithToggleInsideCatalog_post\n  }\n  ","\n  ","\n  ","\n"]);return q=function(){return e},e}function X(){var e=r()(["\n  fragment AddToCatalogBase_bookEdition on BookEdition {\n    id\n    book {\n      id\n    }\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n        }\n        predefinedContainingThis {\n          predefined\n        }\n      }\n      ...editCatalogItemsMutation_bookEditionViewerEdge\n      ...useAddItemToPredefinedCatalog_bookEditionViewerEdge\n    }\n    ...WithToggleInsideCatalog_bookEdition\n  }\n  ","\n  ","\n  ","\n"]);return X=function(){return e},e}function ee(e){var n=e.children,t=e.isPanelVisible,a=e.hidePanel,r=e.togglePanel,o=e.target,i=e.kind,l=e.viewer,d=e.bookmarkIcon,c=e.isInACatalog,g=e.isInReadingList,f=e.catalogsCount,p=e.popoverDisplay,v=(0,J.O)(!1),m=s()(v,3),I=m[0],C=m[1],b=m[2],E=function(e,n,t,a){var r=(0,D.Av)(),o=(0,h.useMutation)(W,{variables:{type:n,operation:{preprend:{type:a,id:t}}},optimisticResponse:{addToPredefinedCatalog:{__typename:"AddToPredefinedCatalogSucces",version:B.xt,insertedItem:{__typename:"CatalogItemV2",catalogId:U,catalogItemId:B.PH}}},onCompleted:function(e){if("AddToPredefinedCatalogSucces"===e.addToPredefinedCatalog.__typename&&a===L.ej.POST){var n=e.addToPredefinedCatalog.insertedItem;r.event("post.addToList",{listId:n.catalogId,postId:n.catalogItemId})}},update:function(r,o){var i,l=null===(i=o.data)||void 0===i?void 0:i.addToPredefinedCatalog;if("AddToPredefinedCatalogSucces"===(null==l?void 0:l.__typename)){var d,c,s=l.insertedItem,g=l.version;if(s.catalogId!==U&&(0,S.UV)(r,s.catalogId,g),a===L.ej.BOOK_EDITION)d="BookEditionViewerEdge:".concat((0,R.j)(t,e)),c=$;else{if(a!==L.ej.POST)return;d="PostViewerEdge:".concat((0,M.Q)(t,e)),c=K}var u=r.readFragment({id:d,fragment:c});if(null!=u&&u.catalogsConnection){var f=x()(u.catalogsConnection.predefinedContainingThis),p=f.findIndex((function(e){return e.predefined===n}));if(-1!==p)f[p].catalogItemIds.push(s.catalogItemId);else{var v={catalogId:s.catalogId,predefined:n,version:g,catalogItemIds:[s.catalogItemId]};f.push(v)}r.writeFragment({id:d,fragment:c,data:N(N({},u),{},{catalogsConnection:N(N({},u.catalogsConnection),{},{predefinedContainingThis:f})})})}}}});return s()(o,1)[0]}(l.id,L.l8.READING_LIST,o.id,i),P=u.useCallback((function(){r(),g||c||E()}),[r,c,g,E]);return u.createElement(Q.J,{isVisible:t,popoverRenderFn:function(){return u.createElement(j,{showCreateModal:C,hidePanel:a,target:o,kind:i,viewer:l})},hide:a,targetDistance:15,referenceWidth:"100%",display:p},u.createElement(A.a,{isVisible:I,hide:b,target:o,kind:i,viewer:l}),n({onClick:P,bookmarkIcon:d,catalogsCount:f,isPanelVisible:t}))}function ne(e){var n=e.viewer,t=d()(e,["viewer"]),a=t.target.viewerEdge.catalogsConnection,r=(null==a?void 0:a.catalogsContainingThis)&&a.catalogsContainingThis.length>0,o=u.useMemo((function(){var e;return!!(null==a||null===(e=a.predefinedContainingThis)||void 0===e?void 0:e.find((function(e){return e.predefined===L.l8.READING_LIST})))}),[a]),l=u.useMemo((function(){return((null==a?void 0:a.catalogsContainingThis.length)||0)+(o?1:0)}),[null==a?void 0:a.catalogsContainingThis.length,o]),c=u.createElement(Z.l,{insideACatalog:!!r||o});return n?u.createElement(Y.B,null,(function(e){var a=e.isVisible,d=e.toggle,s=e.hide;return u.createElement(ee,i()({},t,{viewer:n,isPanelVisible:a,togglePanel:d,hidePanel:s,bookmarkIcon:c,isInACatalog:!!r,isInReadingList:o,catalogsCount:l}))})):c}var te=(0,g.Ps)(X(),$,B.T_,_.tA),ae=(0,g.Ps)(q(),K,B.ST,_.m7)},62212:(e,n,t)=>{"use strict";t.d(n,{l:()=>v,K:()=>g});var a=t(67294),r=t(14646);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var i=a.createElement("path",{d:"M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5v-2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V5.75z",fill:"#000"});const l=function(e){return a.createElement("svg",o({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),i)};function d(){return(d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var c=a.createElement("path",{d:"M7.5 3.75a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-14a2 2 0 0 0-2-2h-9z",fill:"#000"});const s=function(e){return a.createElement("svg",d({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)};var g=function(e){return{"& path":{fill:e.baseColor.border.darker}}},u=function(e){return{"& path":{fill:e.baseColor.fill.darker}}},f=function(){var e=(0,r.I)();return a.createElement(l,{className:e(g)})},p=function(){var e=(0,r.I)();return a.createElement(s,{className:e(u)})};function v(e){return e.insideACatalog?a.createElement(p,null):a.createElement(f,null)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/69865.758321b7.chunk.js.map